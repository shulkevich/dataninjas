

# Описание

Создано хранилище данных, которое аккумулирует события, происходящие на сайте.

Вам нужно построить дашборд, который позволит бизнесу анализировать эти данные и принимать решения.


# Структура хранилища.

* `staging`

    * `events` - таблица содержит сырые события, которые приходят из указанного источника.

* `ods`

    * `events` - вводится тип события на основе `page_url_path`
        Возможные значения:
        * `home`
        * `product`
        * `cart`
        * `payment`
        * `confirmation`

* `dds`

    * `events` - Добавляются данные о часе события, а также о предыдущем событиии и странице.

* `datamart`

    * `t_01_events` - распределение событий по часам

    * `t_02_goods` - количество купленных товаров в разрезе часа

        Покупкой считается переход на страницу `confirmation`.
        Количество товаров подсчитывается по количеству `confirmation`.
        Мы считаем, что в корзине может быть только один товар.

    * `t_03_top_links` - топ-10 посещённых страниц, с которых был переход в покупку — список ссылок с количеством покупок

# Описание процессов

Загрузка данных в staging происходит с помощью Airflow. Для этого созданы DAG и операторы, которые джобу в spark.
Загрузка в staging инкрементальная по датам. Есть инициализирующая загрузка.

В слои `ods`, `dds`, `datamart` данные попадают с помощью Airflow. Для этого созданы DAG и операторы для запука запросов.

# Описание отчетов

Созданы графики и дашборд в Metabase для соответствующих таблиц в слое `datamart`.

